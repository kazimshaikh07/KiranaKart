{% load static %}
<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>KiranaKart</title>
    <link
      href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.8/dist/css/bootstrap.min.css"
      rel="stylesheet"
      integrity="sha384-sRIl4kxILFvY47J16cr9ZwB07vP4J8+LH7qKQnuqkuIAvNWLzeN8tE5YBujZqJLB"
      crossorigin="anonymous"
    />
    <link rel="stylesheet" href="{% static 'css/style.css' %}" />
    <link rel="icon" href="{% static 'images/favicon.ico' %}" />
    <link
      rel="stylesheet"
      href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.0/css/all.min.css"
    />
    <script src="{% static 'js/main.js' %}" defer></script>

    <!-- Bootstrap CSS (put this inside <head>) -->
    <link
      href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css"
      rel="stylesheet"
    />

  </head>
  <body>
    <!-- HEADER SECTION -->
    <header class="header bg-light shadow-sm py-3">
      <div
        class="container header-container d-flex justify-content-between align-items-center py-2"
      >
        <!-- Logo -->
        <div class="logo d-flex align-items-center">
          <img
            src="https://media4.giphy.com/media/v1.Y2lkPTc5MGI3NjExb3A1MG9mOGsyeXZxODQyeDI0ZWFxZGliamJvMDV2cHo5aHp6enE2OCZlcD12MV9pbnRlcm5hbF9naWZfYnlfaWQmY3Q9Zw/Phna8ImVFWEqxPUIfk/giphy.gif"
            alt="KiranaExpress Logo"
            class="img-fluid"
            style="height: 40px; width: auto; margin-right: 10px"
          />
          <a href="#"><span class="fw-bold fs-5">KiranaExpress</span></a>
          
        </div>

        <!-- Navigation -->
        <nav class="nav-items d-flex">
          <button>
            <a href="#">
              <div class="nav-item d-flex flex-column align-items-center mx-3">
                <span>üîç</span>
                <span>Search</span>
              </div>
            </a>
          </button>

          <button>
            <a href="{% url 'help' %}">
              <div class="nav-item d-flex flex-column align-items-center mx-3">
                <span>‚ùì</span>
                <span>Help</span>
              </div>
            </a>
          </button>

          {% if user.is_authenticated %}
            <!-- Logout Button -->
            <button>
              <a href="{% url 'logout' %}">
                <div class="nav-item d-flex flex-column align-items-center mx-3">
                  <span>üö™</span>
                  <span>Logout</span>
                </div>
              </a>
            </button>
          {% else %}
            <!-- Sign In Button -->
            <button>
              <a href="{% url 'signin' %}">
                <div class="nav-item d-flex flex-column align-items-center mx-3">
                  <span>üë§</span>
                  <span>Sign In</span>
                </div>
              </a>
            </button>
          {% endif %}

          <!-- Cart Button -->
          <div
            class="nav-item cart-btn d-flex flex-column align-items-center mx-3 position-relative"
            onclick="toggleCart()"
          >
            <img
              src="https://media0.giphy.com/media/v1.Y2lkPTc5MGI3NjExdHF4am5idzZ4OXE4anVmdnBiZzE4ZGc5bzkwNHZ1b25uNGZ1MDhneiZlcD12MV9pbnRlcm5hbF9naWZfYnlfaWQmY3Q9Zw/jtECu4KjK3cqiAUMyR/giphy.gif"
              alt="Cart"
              class="img-fluid"
              style="height: 30px; width: auto;" 
            />
            <span>Cart</span>
            <span
              class="cart-count badge bg-danger position-absolute top-0 start-100 translate-middle"
              id="cartCount">0</span>
          </div>
        </nav>
      </div>
    </header>

    <!-- HERO SECTION -->
    <section class="hero">
      <div class="hero-content">
        <h1>Fresh Groceries Delivered</h1>
        <p>
          Order from your favorite local kirana store and get fresh groceries
          delivered to your doorstep
        </p>
        <div class="search-container">
          <input
            type="text"
            class="search-input"
            placeholder="Search for groceries, fruits, vegetables..."
            id="heroSearch"
          />
          <button class="search-btn">Search</button>
        </div>
      </div>
    </section>

    <!-- CATEGORIES SECTION -->
    <section class="categories-section">
      <div class="container">
        <h2 class="section-title">Shop by Category</h2>
        <div class="categories-grid">
          <div class="category-card active" onclick="filterCategory('all')">
            <span class="category-icon">üõí</span>
            <div class="category-name">All Items</div>
          </div>
          <div class="category-card" onclick="filterCategory('vegetables')">
            <span class="category-icon">ü•¨</span>
            <div class="category-name">Vegetables</div>
          </div>
          <div class="category-card" onclick="filterCategory('fruits')">
            <span class="category-icon">üçé</span>
            <div class="category-name">Fruits</div>
          </div>
          <div class="category-card" onclick="filterCategory('dairy')">
            <span class="category-icon">ü•õ</span>
            <div class="category-name">Dairy</div>
          </div>
          <div class="category-card" onclick="filterCategory('poultry')">
            <span class="category-icon">ü•ö</span>
            <div class="category-name">Poultry</div>
          </div>
          <div class="category-card" onclick="filterCategory('grains')">
            <span class="category-icon">üåæ</span>
            <div class="category-name">Grains</div>
          </div>
          <div class="category-card" onclick="filterCategory('pulses')">
            <span class="category-icon">ü´ò</span>
            <div class="category-name">Pulses</div>
          </div>
          <div class="category-card" onclick="filterCategory('snacks')">
            <span class="category-icon">üç™</span>
            <div class="category-name">Snacks</div>
          </div>
          <div class="category-card" onclick="filterCategory('beverages')">
            <span class="category-icon">ü•§</span>
            <div class="category-name">Beverages</div>
          </div>
        </div>
      </div>
    </section>

    <!-- PRODUCTS SECTION -->
    <section class="products-section">
      <div class="container">
        <div class="products-header">
          <h2 class="section-title">Fresh Products</h2>
          <!-- <div class="filter-tabs">
                    <div class="filter-tab active">Popular</div>
                    <div class="filter-tab">Rating 4.0+</div>
                    <div class="filter-tab">Fast Delivery</div>
                    <div class="filter-tab">Pure Veg</div>
                </div> -->
        </div>
        <div class="products-grid" id="productsGrid">
          <!-- Products will be loaded here -->
        </div>
      </div>
    </section>

    <!-- FOOTER SECTION-->
    <footer class="footer">
      <div class="container">
        <div class="footer-content">
          <div class="footer-section">
            <div class="footer-logo">üõí KiranaExpress</div>
            <p class="footer-description">
              Fresh groceries delivered to your doorstep. Order from your
              favorite local kirana store and enjoy the convenience of home
              delivery.
            </p>
            <div class="social-links">
              <!-- <a href="{% url 'social' %}" class="social-link"><i class="fab fa-envelope"></i></a> -->
              <a href="{% url 'social' %}" class="social-link"><i class="fab fa-facebook"></i></a>
              <a href="{% url 'social' %}" class="social-link"><i class="fab fa-instagram"></i></a>
              <a href="{% url 'social' %}" class="social-link"><i class="fab fa-x-twitter"></i></a>
              <a href="{% url 'social' %}" class="social-link"><i class="fab fa-linkedin"></i></a>
              <a href="{% url 'social' %}" class="social-link"><i class="fab fa-pinterest"></i></a>
            </div>
          </div>

          <div class="footer-section">
            <h4 class="footer-title">Company</h4>
            <ul class="footer-links">
              <li><a href="{% url 'about' %}">About Us</a></li>
              <li><a href="{% url 'career' %}">Careers</a></li>
              <li><a href="{% url 'team' %}">Team</a></li>
              <li><a href="{% url 'one' %}">KiranaExpress One</a></li>
              <li><a href="{% url 'social' %}">KiranaExpress Instamart</a></li>
              <li><a href="{% url 'genie' %}">KiranaExpress Genie</a></li>
            </ul>
          </div>

          <div class="footer-section">
            <h4 class="footer-title">Contact Us</h4>
            <ul class="footer-links">
              <li><a href="#">Help & Support</a></li>
              <li><a href="#">Partner with us</a></li>
              <li><a href="#">Ride with us</a></li>
            </ul>
            <h4 class="footer-title" style="margin-top: 30px">Legal</h4>
            <ul class="footer-links">
              <li><a href="#">Terms & Conditions</a></li>
              <li><a href="#">Cookie Policy</a></li>
              <li><a href="#">Privacy Policy</a></li>
              <li><a href="#">Investor Relations</a></li>
            </ul>
          </div>

          <div class="footer-section">
            <h4 class="footer-title">We deliver to:</h4>
            <ul class="footer-links cities-list">
              <li><a href="#">Bangalore</a></li>
              <li><a href="#">Gurgaon</a></li>
              <li><a href="#">Hyderabad</a></li>
              <li><a href="#">Delhi</a></li>
              <li><a href="#">Mumbai</a></li>
              <li><a href="#">Pune</a></li>
              <li><a href="#">Kolkata</a></li>
              <li><a href="#">Chennai</a></li>
              <li><a href="#">Ahmedabad</a></li>
              <li><a href="#">Chandigarh</a></li>
              <li><a href="#">Jaipur</a></li>
              <li><a href="#">Kochi</a></li>
            </ul>
          </div>
        </div>

        
      </div>
      <!-- <div class="footer-bottom">
          <div class="app-download">
            <span class="download-text"
              >For better experience, download the KiranaExpress app now</span
            >
            <div class="app-buttons">
              <a href="#" class="app-button">
                <img
                  src="data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMTIwIiBoZWlnaHQ9IjQwIiB2aWV3Qm94PSIwIDAgMTIwIDQwIiBmaWxsPSJub25lIiB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciPgo8cmVjdCB3aWR0aD0iMTIwIiBoZWlnaHQ9IjQwIiByeD0iNSIgZmlsbD0iIzAwMCIvPgo8dGV4dCB4PSI2MCIgeT0iMjUiIGZpbGw9IndoaXRlIiBmb250LXNpemU9IjEyIiB0ZXh0LWFuY2hvcj0ibWlkZGxlIj5Hb29nbGUgUGxheTwvdGV4dD4KPHN2Zz4K"
                  alt="Google Play"
                />
              </a>
              <a href="#" class="app-button">
                <img
                  src="data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMTIwIiBoZWlnaHQ9IjQwIiB2aWV3Qm94PSIwIDAgMTIwIDQwIiBmaWxsPSJub25lIiB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciPgo8cmVjdCB3aWR0aD0iMTIwIiBoZWlnaHQ9IjQwIiByeD0iNSIgZmlsbD0iIzAwMCIvPgo8dGV4dCB4PSI2MCIgeT0iMjUiIGZpbGw9IndoaXRlIiBmb250LXNpemU9IjEyIiB0ZXh0LWFuY2hvcj0ibWlkZGxlIj5BcHAgU3RvcmU8L3RleHQ+Cjwvc3ZnPgo="
                  alt="App Store"
                />
              </a>
            </div>
          </div>
      </div> -->

        <div class="footer-copyright">
          <p>
            &copy; <span id="copyrightYear"></span> KiranaExpress Limited. All
            rights reserved.
          </p>
        </div>
    </footer>

    <!-- CART SIDEBAR-->
    <div class="overlay" id="overlay" onclick="toggleCart()"></div>
    <div class="cart-sidebar" id="cartSidebar">
      <div class="cart-header">
        <div class="cart-title">Your Cart</div>
        <button class="close-cart" onclick="toggleCart()">√ó</button>
      </div>
      <div class="cart-items" id="cartItems">
        <!-- Cart items will be displayed here -->
      </div>
      <div class="cart-address">
        <div class="address-title">Delivery Address</div>
        <form id="addressForm" style="padding: 15px;">
          <div style="margin-bottom: 15px;">
            <label for="fullName" style="display: block; font-weight: bold;">Full Name</label>
            <input type="text" id="fullName" name="fullName" placeholder="Enter your full name" required style="width: 100%; padding: 8px; border: 1px solid #ccc; border-radius: 4px;">
          </div>
          <div style="margin-bottom: 15px;">
            <label for="address" style="display: block; font-weight: bold;">Address</label>
            <textarea id="address" name="address" placeholder="Enter your address" required style="width: 100%; padding: 8px; border: 1px solid #ccc; border-radius: 4px; resize: vertical;"></textarea>
          </div>
          <div style="margin-bottom: 15px;">
            <label for="phone" style="display: block; font-weight: bold;">Phone Number</label>
            <input type="tel" id="phone" name="phone" placeholder="Enter your phone number" pattern="[0-9]{10}" required style="width: 100%; padding: 8px; border: 1px solid #ccc; border-radius: 4px;">
          </div>
          <div style="margin-bottom: 15px;">
            <label for="state" style="display: block; font-weight: bold;">State</label>
            <select id="state" name="state" required style="width: 100%; padding: 8px; border: 1px solid #ccc; border-radius: 4px;">
              <option value="" disabled selected>Select State</option>
              <option value="Andaman and Nicobar Islands">Andaman and Nicobar Islands</option>
              <option value="Andhra Pradesh">Andhra Pradesh</option>
              <option value="Arunachal Pradesh">Arunachal Pradesh</option>
              <option value="Assam">Assam</option>
              <option value="Bihar">Bihar</option>
              <option value="Chandigarh">Chandigarh</option>
              <option value="Chhattisgarh">Chhattisgarh</option>
              <option value="Dadra and Nagar Haveli and Daman and Diu">Dadra and Nagar Haveli and Daman and Diu</option>
              <option value="Delhi">Delhi</option>
              <option value="Goa">Goa</option>
              <option value="Gujarat">Gujarat</option>
              <option value="Haryana">Haryana</option>
              <option value="Himachal Pradesh">Himachal Pradesh</option>
              <option value="Jammu and Kashmir">Jammu and Kashmir</option>
              <option value="Jharkhand">Jharkhand</option>
              <option value="Karnataka">Karnataka</option>
              <option value="Kerala">Kerala</option>
              <option value="Ladakh">Ladakh</option>
              <option value="Lakshadweep">Lakshadweep</option>
              <option value="Madhya Pradesh">Madhya Pradesh</option>
              <option value="Maharashtra">Maharashtra</option>
              <option value="Manipur">Manipur</option>
              <option value="Meghalaya">Meghalaya</option>
              <option value="Mizoram">Mizoram</option>
              <option value="Nagaland">Nagaland</option>
              <option value="Odisha">Odisha</option>
              <option value="Puducherry">Puducherry</option>
              <option value="Punjab">Punjab</option>
              <option value="Rajasthan">Rajasthan</option>
              <option value="Sikkim">Sikkim</option>
              <option value="Tamil Nadu">Tamil Nadu</option>
              <option value="Telangana">Telangana</option>
              <option value="Tripura">Tripura</option>
              <option value="Uttar Pradesh">Uttar Pradesh</option>
              <option value="Uttarakhand">Uttarakhand</option>
              <option value="West Bengal">West Bengal</option>
            </select>
          </div>
          <div style="margin-bottom: 15px;">
            <label for="city" style="display: block; font-weight: bold;">City</label>
            <select id="city" name="city" required style="width: 100%; padding: 8px; border: 1px solid #ccc; border-radius: 4px;">
              <option value="" disabled selected>Select City</option>
            </select>
          </div>
          <div style="margin-bottom: 15px;">
            <label for="zip" style="display: block; font-weight: bold;">ZIP Code</label>
            <input type="text" id="zip" name="zip" placeholder="Enter ZIP code" pattern="[0-9]{6}" required style="width: 100%; padding: 8px; border: 1px solid #ccc; border-radius: 4px;">
          </div>
        </form>
      </div>
      <div class="cart-total">
        <div class="total-row">
          <span>Subtotal:</span>
          <span id="subtotal">‚Çπ0</span>
        </div>
        <div class="total-row">
          <span>Delivery Fee:</span>
          <span>‚Çπ25</span>
        </div>
        <div class="total-row">
          <span class="total-amount">Total:</span>
          <span class="total-amount" id="totalAmount">‚Çπ25</span>
        </div>
        <button class="checkout-btn" onclick="checkout()">Proceed to Checkout</button>
      </div>
    </div>
    <script>
      const stateCityMap = {
        "Andaman and Nicobar Islands": ["Port Blair", "Car Nicobar", "Mayabunder"],
        "Andhra Pradesh": ["Visakhapatnam", "Vijayawada", "Guntur", "Nellore", "Kurnool"],
        "Arunachal Pradesh": ["Itanagar", "Naharlagun", "Pasighat"],
        "Assam": ["Guwahati", "Silchar", "Dibrugarh", "Jorhat", "Nagaon"],
        "Bihar": ["Patna", "Gaya", "Bhagalpur", "Muzaffarpur", "Darbhanga"],
        "Chandigarh": ["Chandigarh"],
        "Chhattisgarh": ["Raipur", "Bhilai", "Bilaspur", "Korba"],
        "Dadra and Nagar Haveli and Daman and Diu": ["Daman", "Diu", "Silvassa"],
        "Delhi": ["New Delhi", "Delhi", "Noida"],
        "Goa": ["Panaji", "Margao", "Vasco da Gama"],
        "Gujarat": ["Ahmedabad", "Surat", "Vadodara", "Rajkot", "Gandhinagar"],
        "Haryana": ["Faridabad", "Gurgaon", "Hisar", "Rohtak", "Panipat"],
        "Himachal Pradesh": ["Shimla", "Manali", "Dharamshala", "Solan"],
        "Jammu and Kashmir": ["Srinagar", "Jammu", "Anantnag"],
        "Jharkhand": ["Ranchi", "Jamshedpur", "Dhanbad", "Bokaro"],
        "Karnataka": ["Bengaluru", "Mysuru", "Hubli", "Mangalore", "Belgaum"],
        "Kerala": ["Thiruvananthapuram", "Kochi", "Kozhikode", "Thrissur"],
        "Ladakh": ["Leh", "Kargil"],
        "Lakshadweep": ["Kavaratti"],
        "Madhya Pradesh": ["Bhopal", "Indore", "Gwalior", "Jabalpur", "Ujjain", "Dewas"],
        "Maharashtra": ["Mumbai", "Pune", "Nagpur", "Thane", "Nashik"],
        "Manipur": ["Imphal"],
        "Meghalaya": ["Shillong", "Tura"],
        "Mizoram": ["Aizawl"],
        "Nagaland": ["Kohima", "Dimapur"],
        "Odisha": ["Bhubaneswar", "Cuttack", "Rourkela", "Sambalpur"],
        "Puducherry": ["Puducherry", "Karaikal"],
        "Punjab": ["Ludhiana", "Amritsar", "Jalandhar", "Patiala"],
        "Rajasthan": ["Jaipur", "Jodhpur", "Udaipur", "Kota", "Ajmer"],
        "Sikkim": ["Gangtok"],
        "Tamil Nadu": ["Chennai", "Coimbatore", "Madurai", "Tiruchirappalli", "Salem"],
        "Telangana": ["Hyderabad", "Warangal", "Nizamabad"],
        "Tripura": ["Agartala"],
        "Uttar Pradesh": ["Lucknow", "Kanpur", "Ghaziabad", "Agra", "Varanasi"],
        "Uttarakhand": ["Dehradun", "Haridwar", "Rishikesh", "Nainital"],
        "West Bengal": ["Kolkata", "Howrah", "Durgapur", "Siliguri"]
      };

      document.getElementById('state').addEventListener('change', function() {
        const state = this.value;
        const citySelect = document.getElementById('city');
        citySelect.innerHTML = '<option value="" disabled selected>Select City</option>';
        if (state && stateCityMap[state]) {
          stateCityMap[state].forEach(city => {
            const option = document.createElement('option');
            option.value = city;
            option.textContent = city;
            citySelect.appendChild(option);
          });
        }
      });

      document.getElementById('addressForm').addEventListener('submit', function(e) {
        e.preventDefault();
        // Add logic to handle form submission, e.g., save address or validate
        alert('Address submitted successfully!');
      });
    </script>




    <!-- Bootstrap Bundle JS (with Popper) -->
    <script
      src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.8/dist/js/bootstrap.bundle.min.js"
      integrity="sha384-FKyoEForCGlyvwx9Hj09JcYn3nv7wiPVlz7YYwJrWVcXK/BmnVDxM+D2scQbITxI"
      crossorigin="anonymous"
    ></script>
    <!-- Custom JS -->
    {% if messages %}
      <script>
          {% for message in messages %}
              alert("{{ message|escapejs }}");
          {% endfor %}
      </script>
    {% endif %}
    

    <script>
      const isLoggedIn = {{ request.user.is_authenticated|yesno:"true,false" }};
    </script>
  </body>
</html>
